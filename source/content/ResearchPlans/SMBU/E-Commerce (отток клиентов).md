Подходы:
- **Telco churn** — это отток в моделях подписки (подписчик уходит, событие фиксируется оператором). Здесь данные табличные (тариф, длительность, сервисы, платежи).
- **Маркетплейсы / e-commerce** — покупка (или её отсутствие) полностью инициируется клиентом, поэтому приходится строить поведение на последовательностях событий/транзакций. 

Для survival-моделей с транзакциями признаки (features) лучше строить **на уровне пользователя (user-level features)**, сводя историю событий к характеристикам. Ниже привожу «каркас» признаков, который работает в большинстве случаев.

Наборы данных:
1. https://www.kaggle.com/datasets/shilongzhuang/telecom-customer-churn-by-maven-analytics?select=telecom_customer_churn.csv (побольше)
2. https://www.kaggle.com/datasets/mnassrib/telecom-churn-datasets?utm_source=chatgpt.com&select=churn-bigml-20.csv (поменьше 1)
3. https://www.kaggle.com/datasets/olistbr/brazilian-ecommerce?utm_source=chatgpt.com&select=olist_order_payments_dataset.csv
4. (доп сложное): https://snap.stanford.edu/data/amazon/productGraph/
5. (доп сложное): https://ailab.criteo.com/ressources/

## 1. Базовые временные признаки
- **Recency (давность)**: сколько времени прошло с момента последней покупки/события. 
- **Frequency (частота)**: число покупок за последние `N` дней/месяцев.
- **Tenure (стаж)**: сколько времени пользователь в системе (от первой покупки).
- **Interpurchase mean/variance**: среднее и дисперсия интервала между покупками.

Признаки составляют основу RFM-модели (Recency, Frequency, Monetary).
## 2. Денежные характеристики (Monetary)
- **Средний чек**: средняя сумма заказа.
- **Общая выручка**: сумма заказов за весь период.
- **Медиана чека** (устойчивее к выбросам).
- **Volatility spend**: стандартное отклонение чеков (стабильность vs «разовые всплески»).
    
## 3. Сессионные / поведенческие признаки
- **Среднее количество товаров в заказе**.    
- **Доля возвратов / отмен**.    
- **Конверсия просмотра в покупку** (если есть просмотры). 
- **Время между просмотром и покупкой** (если логи кликов доступны).
## 4. Категориальные профили
- **Доля заказов в каждой категории товаров** (например, электроника 40%, одежда 30%).
- **Сезонность**: активность по месяцам/дням недели/часам суток.
- **Разнообразие корзины**: количество уникальных категорий или товаров.

## 5. Динамические признаки

Чтобы survival-модель «чувствовала» изменение поведения, используют **rolling features**:
- Recency/Frequency/Monetary за последние `N` дней (например, 30, 90).
- Тренды: прирост/спад среднего чека или частоты.
- Скользящие коэффициенты (например, ratio покупок за последние 30 дней к 90 дням).
## 6. Текущие «статусы» клиента

Если данные богаты:
- **Лояльность** (подписка на рассылку, участие в программе). 
- **Активность на платформе** (посещения без покупок).
- **Промокоды/скидки** (чувствительность к цене).
## 7. Target construction (время до события)
- Для **time-to-churn**:
    - _duration_ = время от последней покупки до конца окна или до «отсутствия активности» (churn).
    - _event_ = 1, если клиент перестал покупать в течение периода; 0 — если он активен (цензурирование).
- Для **time-to-next-purchase**:
    - _duration_ = время между последними двумя покупками.
    - _event_ = 1, если покупка совершена, 0 — если данных не хватает (цензура).

## Отличие от Telco
- В **Telco** признаки чаще статичны (тариф, услуги, длительность). Survival там работает по фиксированным фичам.
- В **E-commerce** признаки должны быть **динамическими и агрегированными по окнам** (rolling features). Без временного среза survival-модель теряет смысл, потому что активность пользователя постоянно меняется.

Итог:
Для e-commerce **главное — перевод транзакционного лога в user-level «snapshots» по времени**: на каждый срез (например, каждый месяц или после каждой покупки) строим Recency, Frequency, Monetary, категории, динамику. Тогда survival-модель (CoxPH, RSF, DeepSurv) сможет оценить риск оттока или время до следующей покупки.